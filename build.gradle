plugins {
    id "java"
    id "checkstyle"
    id "maven-publish"
    id "io.spring.dependency-management" version "1.0.11.RELEASE"
}

group "net.shiruka"

sourceCompatibility = JavaVersion.VERSION_16
targetCompatibility = JavaVersion.VERSION_16

tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}

javadoc {
    options.tags = ["todo"]
}

task sourcesJar(type: Jar, dependsOn: classes) {
    classifier "sources"
    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier "javadoc"
    from javadoc.destinationDir
}

checkstyle {
    configFile = file("checkstyle.xml")
    checkstyleTest.enabled = false
}

test {
    useJUnitPlatform()
}

repositories {
    mavenCentral()
    maven {
        url "https://repo.nukkitx.com/maven-snapshots/"
    }
    mavenLocal()
}

dependencyManagement {
    imports {
        mavenBom "io.github.parentpom:ppom:3.4.45"
    }
}

dependencies {
    implementation "org.projectlombok:lombok"
    implementation "org.jetbrains:annotations"
    implementation "com.google.guava:guava"

    annotationProcessor "org.projectlombok:lombok"
    annotationProcessor "org.jetbrains:annotations"

    testImplementation "org.junit.jupiter:junit-jupiter"
}

publishing {
    publications {
        maven(MavenPublication) {
            from components.java
            artifact tasks.sourcesJar
            artifact tasks.javadocJar
            groupId project.group
            artifactId project.name
            version project.version
        }
    }
}
